<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Door Quote Generator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-left">
                <img src="logo-84.png" alt="84 Logo" class="header-logo-small">
                <div>
                    <h1>Door Quote Request Generator</h1>
                    <p class="subtitle">Professional Door Specifications</p>
                </div>
            </div>
            <div class="header-actions">
                <button type="button" class="btn-secondary" onclick="openSaveConfigDialog()" title="Save Configuration">üíæ Save</button>
                <button type="button" class="btn-secondary" onclick="openLoadConfigDialog()" title="Load Configuration">üìÇ Load</button>
            </div>
        </header>

        <main>
            <!-- Module Sidebar -->
            <div class="module-sidebar">
                <h3>üì¶ Available Modules</h3>
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">Click to add sections to your door configuration</p>
                <div class="module-list" id="moduleList"></div>
            </div>

            <!-- Main Form Area -->
            <div class="form-area">
                <form id="quoteForm">
                    <!-- Project Info Section -->
                    <section class="form-section">
                        <h2>Project Information</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customerName">Customer Name</label>
                                <input type="text" id="customerName" class="input-field" placeholder="John Smith">
                            </div>
                            <div class="form-group">
                                <label for="projectName">Project Name</label>
                                <input type="text" id="projectName" class="input-field" placeholder="Residential Renovation">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="projectAddress">Address / Location</label>
                                <input type="text" id="projectAddress" class="input-field" placeholder="123 Main Street, Nashville TN 37207">
                            </div>
                        </div>
                    </section>

                    <!-- Door Configurations Container -->
                    <div id="doorConfigurationsContainer"></div>

                    <!-- Add Door Button -->
                    <div class="add-door-section">
                        <button type="button" class="btn-add-door" onclick="addDoorConfiguration()">
                            <span class="plus-icon">+</span> Add Door Configuration
                        </button>
                    </div>

                    <!-- Action Buttons -->
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="resetForm()">Reset All</button>
                    </div>
                </form>

                <!-- Generated Quote Display -->
                <div id="quoteOutput" class="quote-output">
                    <div class="quote-header-section">
                        <h2>Live Quote Request Preview</h2>
                        <div id="quoteWarning" class="quote-warning hidden">
                            <span class="warning-icon">‚ö†</span>
                            <span id="quoteWarningText">Missing required fields</span>
                        </div>
                    </div>
                    <div id="quoteContent" class="quote-content"></div>
                    <button type="button" class="btn-primary" onclick="copyQuote()">Copy to Clipboard</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Template for Door Configuration -->
    <template id="doorConfigTemplate">
        <div class="door-config-card">
            <div class="door-config-header" onclick="toggleDoorConfig(this.parentElement)">
                <div style="display: flex; align-items: center; gap: 1rem; flex: 1;">
                    <h3 class="door-config-title">Door Configuration <span class="door-number"></span></h3>
                    <div class="quantity-control" onclick="event.stopPropagation()">
                        <label style="font-size: 0.85rem; color: var(--text-secondary); margin-right: 0.5rem;">Qty:</label>
                        <input type="number" class="door-quantity-input" min="1" value="1" style="width: 60px; padding: 0.3rem; text-align: center;" onchange="autoGenerateQuote()">
                    </div>
                </div>
                <div class="door-config-actions" onclick="event.stopPropagation()">
                    <button type="button" class="btn-icon" onclick="duplicateDoor(this)" title="Duplicate">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2z"/>
                        </svg>
                    </button>
                    <button type="button" class="btn-icon btn-collapse" title="Collapse/Expand">
                        <svg class="collapse-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                        </svg>
                    </button>
                    <button type="button" class="btn-icon btn-delete-door" onclick="deleteDoor(this)" title="Delete">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="door-config-summary hidden"></div>
            
            <div class="door-config-body">
                <!-- Modules will be added here dynamically -->
                <div class="empty-state" style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">üëà Click modules from the sidebar to add them</p>
                    <p style="font-size: 0.9rem;">Build your door configuration step by step</p>
                </div>
            </div>
        </div>
    </template>

    <!-- Modal for Managing Options -->
    <div id="optionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Manage Options</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="add-option">
                    <input type="text" id="newOptionInput" class="input-field" placeholder="Enter new option...">
                    <button type="button" class="btn-primary" onclick="addNewOption()">Add</button>
                </div>
                <div class="options-list" id="optionsList"></div>
            </div>
        </div>
    </div>

    <!-- Custom Alert/Confirm Dialog -->
    <div id="customDialog" class="custom-dialog">
        <div class="custom-dialog-content">
            <div class="custom-dialog-icon" id="dialogIcon"></div>
            <div class="custom-dialog-message" id="dialogMessage"></div>
            <div class="custom-dialog-buttons" id="dialogButtons"></div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Dev Menu -->
    <div class="dev-menu" id="devMenu">
        <div class="dev-menu-header">
            <h3>Dev Menu</h3>
            <span class="dev-menu-hint">Press ` to close</span>
        </div>
        <div class="dev-menu-content">
            <button type="button" class="dev-btn" onclick="generateRandomConfiguration()">
                <span class="dev-icon">üé≤</span> Generate Random Configuration
            </button>
            <button type="button" class="dev-btn" onclick="generateRandomConfiguration(true)">
                <span class="dev-icon">‚ö°</span> Generate Small Configuration
            </button>
            <button type="button" class="dev-btn" onclick="generateMultipleRandom(3)">
                <span class="dev-icon">üéØ</span> Generate 3 Random Doors
            </button>
            <button type="button" class="dev-btn" onclick="clearAllDoors()">
                <span class="dev-icon">üóëÔ∏è</span> Clear All Doors
            </button>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="drag-drop.js"></script>
</body>
</html>
